{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/select/macro.njk" import govukSelect %}
{% from "govuk/components/table/macro.njk" import govukTable %}
{% extends "policies/policy.njk" %}
{% block policy_content %}
<p class="govuk-body">
    <strong>Jump to </strong>
    {% for table in tables %}
        <a class="govuk-link" href="#{{table.shortname}}">{{table.shortname}}</a>{% if not loop.last %} | {% endif %}
    {% endfor %}
</p>
<details class="govuk-details" data-module="govuk-details">
    <summary class="govuk-details__summary">Options</summary>
    <form method="get" class="govuk-form">
        {{ govukSelect({
                    label: { text: "Group results by" },
                    id: "groupby",
                    name: "groupby",
                    items: groupByItems
        }) }}
        {{ govukButton({ text: "Update" }) }}
    </form>
</details>
{% for table in tables %}
    {{ govukTable({
        attributes: { id: table.shortname },
        caption: table.name,
        captionClasses: "govuk-table__caption--m",
        firstCellIsHeader: firstCellIsHeader,
        head: header,
        rows: table.rows
    }) }}
{% endfor %}
{% endblock %}
